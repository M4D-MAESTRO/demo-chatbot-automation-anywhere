<ion-content appScrollTheme>
  <form  [formGroup]="form" (ngSubmit)="$event.preventDefault()">
    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">
      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>
      <div class="surface-card p-4 shadow-2 border-round p-fluid">
        <div class="grid formgrid p-fluid">
          <div class="field mb-4 col-12 md:col-6">
            <label for="nome" class="font-medium text-900">Nome</label>
            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">
            <div class="flex mt-1 justify-content-end">
              <p-message severity="error" text="Obrigatório" *ngIf="isInputError('nome')"></p-message>
            </div>
          </div>
          <div class="field mb-4 col-12 md:col-6">
            <label for="valor_patrimonio">Valor do patrimônio</label>
            <p-inputNumber inputId="valor_patrimonio" formControlName="valor_patrimonio" mode="decimal"
              [minFractionDigits]="2" [maxFractionDigits]="2">
            </p-inputNumber>
            <div class="flex mt-1 justify-content-end">
              <p-message severity="error" text="Obrigatório" *ngIf="isInputError('valor_patrimonio')"></p-message>
            </div>
          </div>

          <div class="field mb-4 col-12">
            <label for="descricao">Descrição</label>
            <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"
              formControlName="descricao"></textarea>
            <div class="flex mt-1 justify-content-end">
              <p-message severity="error" text="Obrigatório" *ngIf="isInputError('descricao')"></p-message>
            </div>
          </div>

          <div class="field mb-4 col-12 md:col-6">
            <div class="flex align-items-center">
              <p-checkbox  id="id_fisico" formControlName="id_fisico" [binary]="true"></p-checkbox>
              <label class="ml-2" for="id_fisico">Associar a este dispositivo?</label>
          </div>
            <div class="flex mt-1 justify-content-end">
              <p-message severity="error" text="Obrigatório" *ngIf="isInputError('id_fisico')"></p-message>
            </div>
          </div>
          <div class="field mb-4 col-12 md:col-6">
            <label for="status_patrimonio">Status</label>
            <p-dropdown  [options]="sortStatus" placeholder="Status"
            formControlName="status_patrimonio" optionLabel="nome" optionValue="value"></p-dropdown>
            <div class="flex mt-1 justify-content-end">
              <p-message severity="error" text="Obrigatório" *ngIf="isInputError('status_patrimonio')"></p-message>
            </div>
          </div>
          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>

          <!--
          <div class="field mb-4 col-12 justify-content-start">
            <label for="loja_id">Loja</label>
            <span class="p-input-icon-right mb-2 mt-2 w-3">
              <i class="pi pi-search cursor-pointer text-primary" (click)="searchLoja()"></i>
              <input type="search" pInputText [(ngModel)]="searchedLoja" [ngModelOptions]="{standalone: true}"
                placeholder="Nome ou descrição" (keyup.enter)="searchLoja(dropdown_loja)">
            </span>
            <p-dropdown #dropdown_loja [options]="lojas.data" placeholder="Qual loja ele está associado?"
              formControlName="loja_id" optionLabel="nome" optionValue="id"></p-dropdown>
            <p-paginator [value]="lojas.data" [paginator]="true" [rows]="lojas.meta.take"
              [totalRecords]="lojas.meta.itemCount" [pageLinks]="lojas.meta.pageCount"
              (onPageChange)="paginarLojas($event, dropdown_cargo)">
            </p-paginator>
            <div class="flex mt-1 justify-content-end">
              <p-message severity="error" text="Obrigatório" *ngIf="isInputError('loja_id')"></p-message>
            </div>
          </div>
          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>
          -->
        </div>
        <div class="flex justify-content-end">
          <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"
            [disabled]="disableUpdateBtn()"></button>
        </div>
      </div>
    </div>
  </form>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>
  </ion-toolbar>
</ion-footer>